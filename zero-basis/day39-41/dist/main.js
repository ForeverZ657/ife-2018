!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={bind:function(t){var e=t.querySelectorAll("[checkbox-type=single]"),n=t.querySelector("[checkbox-type=all]");t.addEventListener("change",function(t){var i=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e)).filter(function(t){return t.checked});if("all"===t.target.getAttribute("checkbox-type"))if(i.length!==e.length)for(var r=0;r<e.length;r++)e[r].checked=t.target.checked;else t.target.checked=!0;else switch(i.length){case 0:t.target.checked=!0;break;case e.length:n.checked=!0;break;default:n.checked=!1}})},init:function(){if(document.getElementById("select-wrapper").querySelectorAll("input").forEach(function(t){t.checked=!1}),location.hash.length>1){var t=JSON.parse(decodeURI(location.hash.slice(1)));t.product.forEach(function(t){document.getElementsByName(t)[0].checked=!0}),t.region.forEach(function(t){document.getElementsByName(t)[0].checked=!0}),document.getElementById("regionAll").checked=3===t.region.length,document.getElementById("productAll").checked=3===t.product.length}else if(localStorage.getItem("selectedData")){var e=[],n=[];JSON.parse(localStorage.getItem("selectedData")).forEach(function(t){-1===e.indexOf(t.product)&&(e.push(t.product),document.getElementsByName(t.product)[0].checked=!0),-1===n.indexOf(t.region)&&(n.push(t.region),document.getElementsByName(t.region)[0].checked=!0)}),document.getElementById("regionAll").checked=3===n.length,document.getElementById("productAll").checked=3===e.length}else document.getElementById("select-wrapper").querySelectorAll("input").forEach(function(t){t.checked=!0})},getSelectedItems:function(){var t=[],e=[];return document.getElementById("region-wrapper").querySelectorAll("[checkbox-type=single]").forEach(function(e){e.checked&&t.push(e.value)}),document.getElementById("product-wrapper").querySelectorAll("[checkbox-type=single]").forEach(function(t){t.checked&&e.push(t.value)}),{region:t,product:e}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=[{product:"手机",region:"华东",sale:[120,100,140,160,180,185,190,210,230,245,255,270]},{product:"手机",region:"华北",sale:[80,70,90,110,130,145,150,160,170,185,190,200]},{product:"手机",region:"华南",sale:[220,200,240,250,260,270,280,295,310,335,355,380]},{product:"笔记本",region:"华东",sale:[50,60,80,110,30,20,70,30,420,30,20,20]},{product:"笔记本",region:"华北",sale:[30,35,50,70,20,15,30,50,710,130,20,20]},{product:"笔记本",region:"华南",sale:[80,120,130,140,70,75,120,90,550,120,110,100]},{product:"智能音箱",region:"华东",sale:[10,30,4,5,6,5,4,5,6,5,5,25]},{product:"智能音箱",region:"华北",sale:[15,50,15,15,12,11,11,12,12,14,12,40]},{product:"智能音箱",region:"华南",sale:[10,40,10,6,5,6,8,6,6,6,7,26]}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(1)),r=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(){for(var t=document.getElementById("table-wrapper");t.firstChild;)t.removeChild(t.firstChild);var e=document.createElement("table");t.appendChild(e);var n=document.createElement("tbody");e.appendChild(n),n.innerHTML="<tr><th>商品</th><th>地区</th><th>1月</th><th>2月</th><th>3月</th><th>4月</th><th>5月</th><th>6月</th><th>7月</th><th>8月</th><th>9月</th><th>10月</th><th>11月</th><th>12月</th></tr>";var i=r.default.getSelectedItems(),a=1===i.region.length&&i.region.length<i.product.length;if(a){var o=n.rows[0].cells[0].innerText;n.rows[0].cells[0].innerText=n.rows[0].cells[1].innerText,n.rows[0].cells[1].innerText=o}h(i).forEach(function(t,e){var r=document.createElement("tr");a?e%i.product.length==0?r.innerHTML="<td rowspan="+i.product.length+">"+t.region+"</td><td>"+t.product+"</td>":r.innerHTML="<td>"+t.product+"</td>":e%i.region.length==0?r.innerHTML="<td rowspan="+i.region.length+">"+t.product+"</td><td>"+t.region+"</td>":r.innerHTML="<td>"+t.region+"</td>",t.sale.forEach(function(t){r.innerHTML+="<td>"+t+'<i class="fas fa-edit"></i></td>'}),n.appendChild(r)}),n.addEventListener("click",s)}function h(t){var e=[];return(JSON.parse(localStorage.getItem("allData"))||i.default).forEach(function(n){t.region.indexOf(n.region)>-1&&t.product.indexOf(n.product)>-1&&e.push(n)}),e}function s(t){var e=t.target;if("TD"===e.nodeName&&e.childNodes.length>1){var n=e.innerHTML;e.innerHTML='<input type="text">\n                   <div class="input-icon">\n                     <i class="fas fa-check"></i>\n                     <i class="fas fa-times"></i>\n                   </div>',e.firstChild.focus(),e.firstChild.setAttribute("placeholder",n.slice(0,n.indexOf("<"))),e.firstChild.addEventListener("keydown",function(t){13===t.keyCode&&l(this.value)&&(e.innerHTML=this.value+'<i class="fas fa-edit"></i>'),27===t.keyCode&&(e.innerHTML=n)}),e.firstChild.addEventListener("blur",function(t){e.innerHTML=n}),e.querySelector(".fa-check").addEventListener("mousedown",function(t){l(this.parentNode.previousElementSibling.value)&&(e.innerHTML=this.parentNode.previousElementSibling.value+'<i class="fas fa-edit"></i>')}),e.querySelector(".fa-times").addEventListener("mousedown",function(){e.innerHTML=n})}}function l(t){return!isNaN(Number(t))&&""!==t.trim()||(alert("Input invalid!"),!1)}e.default={render:c,init:function(){c()},getData:h,getCurrentData:function(){var t=[],e=document.getElementsByTagName("tbody")[0];return[].concat(o(e.childNodes)).slice(1).forEach(function(e){t.push([].concat(o(e.childNodes)).slice(-12).map(function(t){return t.innerText}))}),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=a(n(2));a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.ctx=this.container.getContext("2d"),this.margin=n.margin||20,this.pointRadius=n.pointRadius||4,this.width=document.documentElement.clientWidth/2,this.height=document.documentElement.clientHeight-370,this.colors=["#f71111","#f9c300","#43ed00","#00edd1","#006eed","#9600ed","#ed00b5","#ca41f4","#f4419d"],this.init()}return i(t,[{key:"init",value:function(){this.container.width=2*this.width,this.container.height=2*this.height,this.container.style.width=this.width+"px",this.container.style.height=this.height+"px",this.ctx.scale(2,2),this.ctx.clearRect(0,0,this.width,this.height),this.drawAxes(),this.drawLines(r.default.getCurrentData())}},{key:"set",value:function(t){this.data=t,this.ctx.clearRect(0,0,this.width,this.height),this.drawLine(),this.drawAxes()}},{key:"drawAxes",value:function(){this.ctx.beginPath(),this.ctx.moveTo(this.margin,this.height-this.margin),this.ctx.lineTo(this.margin,this.margin),this.ctx.moveTo(this.margin,this.height-this.margin),this.ctx.lineTo(this.width-this.margin,this.height-this.margin),this.ctx.lineWidth=2,this.ctx.strokeStyle="rgb(0,0,0)",this.ctx.stroke()}},{key:"drawLine",value:function(t,e,n){var i=this;t&&(this.data=t),n||(n=this.colors[Math.floor(9*Math.random())]);var r=void 0,a=(this.width-2*this.margin)/(2*this.data.length+1);e||(e=(this.height-2*this.margin)/Math.max.apply(Math,o(this.data))),this.data.forEach(function(t,o){var c=i.margin+a*(2*o+1),h=i.height-i.margin-e*t;i.drawLabelX(c,i.height-2,o+1),i.ctx.beginPath(),i.ctx.arc(c,h,i.pointRadius,0,2*Math.PI),i.ctx.fillStyle=n,i.ctx.fill(),o&&(i.ctx.beginPath(),i.ctx.moveTo(r.x,r.y),i.ctx.lineTo(c,h),i.ctx.strokeStyle=n,i.ctx.stroke()),r={x:c,y:h}})}},{key:"drawLines",value:function(t){var e=this,n=Math.max.apply(Math,o(t.map(function(t){return Math.max.apply(Math,o(t))}))),i=(this.height-2*this.margin)/n;t.forEach(function(t,n){e.drawLine(t,i,e.colors[n])})}},{key:"drawLabelX",value:function(t,e,n){this.ctx.beginPath(),this.ctx.font="12px arial",this.ctx.textAlign="center",this.ctx.fillStyle="rgb(0,0,0)",this.ctx.fillText(n+"月",t,e)}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=n.data||[],this.margin=n.margin||20,this.barColor=n.barColor||"#2669ef",this.axisColor=n.axisColor||"rgb(0,0,0)",this.container=e,this.width=document.documentElement.clientWidth/2,this.height=document.documentElement.clientHeight-370,this.init()}return i(t,[{key:"init",value:function(){this.setAttributes(this.container,{width:this.width,height:this.height}),this.drawAxes(),this.drawBars()}},{key:"set",value:function(t){this.data=t,this.clear(),this.drawAxes(),this.drawBars()}},{key:"clear",value:function(){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild)}},{key:"drawAxes",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","line");this.setAttributes(t,{x1:this.margin,y1:this.height-this.margin,x2:this.margin,y2:this.margin,stroke:this.axisColor,"stroke-width":2}),this.container.appendChild(t);var e=document.createElementNS("http://www.w3.org/2000/svg","line");this.setAttributes(e,{x1:this.margin,y1:this.height-this.margin,x2:this.width-this.margin,y2:this.height-this.margin,stroke:this.axisColor,"stroke-width":2}),this.container.appendChild(e)}},{key:"drawBars",value:function(){var t=this,e=(this.width-2*this.margin)/this.data.length,n=.65*e,i=(this.height-2*this.margin)/Math.max.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.data));this.data.forEach(function(r,a){var o=i*r,c=document.createElementNS("http://www.w3.org/2000/svg","rect"),h=t.margin+e*(a+.5)-.5*n,s=t.height-t.margin-o-2;t.setAttributes(c,{x:h,y:s,width:n,height:o,fill:t.barColor}),t.container.appendChild(c),t.container.appendChild(t.drawLabelX(h+.5*n,t.height,a+1))})}},{key:"drawLabelX",value:function(t,e,n){var i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.innerHTML=n+"月",this.setAttributes(i,{x:t,y:e,dy:-2,style:"text-anchor: middle;font-size: 0.8em;"}),i}},{key:"setAttributes",value:function(t,e){for(var n in e)t.setAttributeNS(null,n,e[n])}}]),t}();e.default=r},,function(t,e,n){},function(t,e,n){"use strict";h(n(6));var i=h(n(2)),r=h(n(0)),a=h(n(4)),o=h(n(3)),c=h(n(1));function h(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}r.default.bind(document.getElementById("region-wrapper")),r.default.bind(document.getElementById("product-wrapper")),r.default.init(),i.default.init();var l=new a.default(document.getElementById("svg"),{data:[].concat(s(document.getElementsByTagName("tr")[1].childNodes)).slice(-12).map(function(t){return t.innerText})}),d=new o.default(document.getElementById("canvas"));function u(t,e){t.forEach(function(t){t.product===e.product&&t.region===e.region&&(t.sale=e.sale)})}window.addEventListener("mouseover",function(t){if("TD"===t.target.nodeName){var e=t.target.parentNode,n=[].concat(s(e.childNodes)).map(function(t){return t.innerText}).slice(-12);l.set(n),d.set(n)}else"INPUT"!==t.target.nodeName&&"I"!==t.target.nodeName&&"input-icon"!==t.target.className&&d.init()}),document.getElementById("select-wrapper").addEventListener("change",function(t){history.pushState({},null,"#"+encodeURI(JSON.stringify(r.default.getSelectedItems()))),i.default.render(),d.init()}),window.onresize=function(){window.location.href=window.location.href},document.getElementById("btn-save").addEventListener("click",function(){var t=[],e=c.default,n=document.getElementsByTagName("tbody")[0],i="地区"===n.childNodes[0].childNodes[0].innerHTML,r=void 0;[].concat(s(n.childNodes)).slice(1).forEach(function(n,a,o){var c=[].concat(s(n.childNodes));if(14===c.length){r=c;var h={product:i?c[1].innerText:c[0].innerText,region:i?c[0].innerText:c[1].innerText,sale:c.slice(-12).map(function(t){return t.innerText})};t.push(h),u(e,h)}else{var l={product:i?c[0].innerText:r[0].innerText,region:i?r[0].innerText:c[0].innerText,sale:c.slice(-12).map(function(t){return t.innerText})};t.push(l),u(e,l)}}),localStorage.setItem("selectedData",JSON.stringify(t)),localStorage.setItem("allData",JSON.stringify(e))}),window.addEventListener("popstate",function(){r.default.init(),i.default.render()})}]);